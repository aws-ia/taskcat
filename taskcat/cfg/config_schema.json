{
    "$schema": "http://json-schema.org/draft-06/schema#",
    "additionalProperties": false,
    "definitions": {
        "GeneralConfig": {
            "additionalProperties": false,
            "description": "General configuration settings.",
            "properties": {
                "auth": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "AWS authentication section",
                    "examples": [
                        {
                            "cn-northwest-1": "china-profile",
                            "default": "my-default-profile",
                            "us-east-2": "specific-profile-for-us-east-2"
                        }
                    ],
                    "type": "object"
                },
                "parameters": {
                    "additionalProperties": {
                        "oneOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "integer"
                            },
                            {
                                "type": "boolean"
                            },
                            {
                                "items": {
                                    "oneOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "type": "string"
                                        }
                                    ]
                                },
                                "type": "array"
                            }
                        ]
                    },
                    "description": "Parameter key-values to pass to CloudFormation, parameters provided in global config take precedence",
                    "type": "object"
                },
                "posthooks": {
                    "description": "hooks to execute after executing tests",
                    "items": {
                        "$ref": "#/definitions/HookData"
                    },
                    "type": "array"
                },
                "prehooks": {
                    "description": "hooks to execute prior to executing tests",
                    "items": {
                        "$ref": "#/definitions/HookData"
                    },
                    "type": "array"
                },
                "regions": {
                    "description": "List of AWS regions",
                    "items": {
                        "description": "AWS Region name",
                        "examples": [
                            "us-east-1"
                        ],
                        "pattern": "^(ap|eu|us|sa|ca|cn|af|me|us-gov)-(central|south|north|east|west|southeast|southwest|northeast|northwest)-[0-9]$",
                        "type": "string"
                    },
                    "type": "array"
                },
                "s3_bucket": {
                    "description": "Name of S3 bucket to upload project to, if left out a bucket will be auto-generated",
                    "examples": [
                        "my-s3-bucket-name"
                    ],
                    "type": "string"
                },
                "s3_regional_buckets": {
                    "description": "Enable regional auto-buckets.",
                    "examples": [
                        true,
                        false
                    ],
                    "type": "boolean"
                },
                "tags": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "Tags to apply to CloudFormation template",
                    "examples": [
                        {
                            "CostCenter": "1001"
                        }
                    ],
                    "type": "object"
                }
            },
            "type": "object"
        },
        "HookData": {
            "additionalProperties": false,
            "description": "Hook definition",
            "properties": {
                "config": {
                    "description": "hook configuration",
                    "type": "object"
                },
                "type": {
                    "description": "hook type",
                    "type": "string"
                }
            },
            "type": "object"
        },
        "ProjectConfig": {
            "additionalProperties": false,
            "description": "Project specific configuration section",
            "properties": {
                "auth": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "AWS authentication section",
                    "examples": [
                        {
                            "cn-northwest-1": "china-profile",
                            "default": "my-default-profile",
                            "us-east-2": "specific-profile-for-us-east-2"
                        }
                    ],
                    "type": "object"
                },
                "az_blacklist": {
                    "description": "List of Availablilty Zones ID's to exclude when generating availability zones",
                    "items": {
                        "description": "Availability Zone ID, eg.: 'use1-az1'",
                        "examples": [
                            "usw2-laz1-az1",
                            "use2-az2"
                        ],
                        "pattern": "(af-south-1a|af-south-1b|af-south-1c|ap-east-1a|ap-east-1b|ap-east-1c|ap-northeast-1a|ap-northeast-1c|ap-northeast-1d|ap-northeast-2a|ap-northeast-2b|ap-northeast-2c|ap-northeast-2d|ap-northeast-3a|ap-northeast-3b|ap-northeast-3c|ap-south-1a|ap-south-1b|ap-south-1c|ap-southeast-1a|ap-southeast-1b|ap-southeast-1c|ap-southeast-2a|ap-southeast-2b|ap-southeast-2c|ca-central-1a|ca-central-1b|ca-central-1d|eu-central-1a|eu-central-1b|eu-central-1c|eu-north-1a|eu-north-1b|eu-north-1c|eu-south-1a|eu-south-1b|eu-south-1c|eu-west-1a|eu-west-1b|eu-west-1c|eu-west-2a|eu-west-2b|eu-west-2c|eu-west-3a|eu-west-3b|eu-west-3c|me-south-1a|me-south-1b|me-south-1c|sa-east-1a|sa-east-1b|sa-east-1c|us-east-1-bos-1a|us-east-1-chi-1a|us-east-1-dfw-1a|us-east-1-iah-1a|us-east-1-mci-1a|us-east-1-mia-1a|us-east-1-msp-1a|us-east-1-nyc-1a|us-east-1-phl-1a|us-east-1a|us-east-1b|us-east-1c|us-east-1d|us-east-1e|us-east-1f|us-east-2a|us-east-2b|us-east-2c|us-west-1b|us-west-1c|us-west-2-den-1a|us-west-2-las-1a|us-west-2-lax-1a|us-west-2-lax-1b|us-west-2-pdx-1a|us-west-2a|us-west-2b|us-west-2c|us-west-2d)",
                        "type": "string"
                    },
                    "type": "array"
                },
                "build_submodules": {
                    "description": "Build Lambda zips recursively for submodules, set to false to disable",
                    "examples": [
                        true,
                        false
                    ],
                    "type": "boolean"
                },
                "lambda_source_path": {
                    "description": "Path relative to the project root containing Lambda zip files, default is 'lambda_functions/source'",
                    "examples": [
                        "functions/source"
                    ],
                    "type": "string"
                },
                "lambda_zip_path": {
                    "description": "Path relative to the project root to place Lambda zip files",
                    "examples": [
                        "functions/packages"
                    ],
                    "type": "string"
                },
                "name": {
                    "description": "Project name, used as s3 key prefix when uploading objects",
                    "examples": [
                        "my-project-name"
                    ],
                    "pattern": "^[a-z0-9-]*$",
                    "type": "string"
                },
                "org_id": {
                    "description": "Organization ID to use when launching CFN Stacks. starts with o-. It is found on Organization Settings page",
                    "type": "string"
                },
                "owner": {
                    "description": "email address for project owner (not used at present)",
                    "examples": [
                        "Bob.Slydell@example.com"
                    ],
                    "type": "string"
                },
                "package_lambda": {
                    "description": "Package Lambda functions into zips before uploading to s3, set to false to disable",
                    "examples": [
                        true,
                        false
                    ],
                    "type": "boolean"
                },
                "parameters": {
                    "additionalProperties": {
                        "oneOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "integer"
                            },
                            {
                                "type": "boolean"
                            },
                            {
                                "items": {
                                    "oneOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "type": "string"
                                        }
                                    ]
                                },
                                "type": "array"
                            }
                        ]
                    },
                    "description": "Parameter key-values to pass to CloudFormation, parameters provided in global config take precedence",
                    "type": "object"
                },
                "posthooks": {
                    "description": "hooks to execute after executing tests",
                    "items": {
                        "$ref": "#/definitions/HookData"
                    },
                    "type": "array"
                },
                "prehooks": {
                    "description": "hooks to execute prior to executing tests",
                    "items": {
                        "$ref": "#/definitions/HookData"
                    },
                    "type": "array"
                },
                "regions": {
                    "description": "List of AWS regions",
                    "items": {
                        "description": "AWS Region name",
                        "examples": [
                            "us-east-1"
                        ],
                        "pattern": "^(ap|eu|us|sa|ca|cn|af|me|us-gov)-(central|south|north|east|west|southeast|southwest|northeast|northwest)-[0-9]$",
                        "type": "string"
                    },
                    "type": "array"
                },
                "role_name": {
                    "description": "Role name to use when launching CFN Stacks.",
                    "type": "string"
                },
                "s3_bucket": {
                    "description": "Name of S3 bucket to upload project to, if left out a bucket will be auto-generated",
                    "examples": [
                        "my-s3-bucket-name"
                    ],
                    "pattern": "^[a-z0-9-]*$",
                    "type": "string"
                },
                "s3_enable_sig_v2": {
                    "description": "Enable (deprecated) sigv2 access to auto-generated buckets",
                    "examples": [
                        true,
                        false
                    ],
                    "type": "boolean"
                },
                "s3_object_acl": {
                    "default": "private",
                    "description": "ACL for uploaded s3 objects",
                    "examples": [
                        "bucket-owner-read",
                        "private"
                    ],
                    "pattern": "^(bucket-owner-full-control|bucket-owner-read|authenticated-read|aws-exec-read|public-read-write|public-read|private)$",
                    "type": "string"
                },
                "s3_regional_buckets": {
                    "description": "Enable regional auto-buckets.",
                    "examples": [
                        true,
                        false
                    ],
                    "type": "boolean"
                },
                "shorten_stack_name": {
                    "description": "Shorten stack names generated for tests, set to true to enable",
                    "examples": [
                        true,
                        false
                    ],
                    "type": "boolean"
                },
                "tags": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "Tags to apply to CloudFormation template",
                    "examples": [
                        {
                            "CostCenter": "1001"
                        }
                    ],
                    "type": "object"
                },
                "template": {
                    "description": "path to template file relative to the project config file path",
                    "examples": [
                        "cloudformation_templates/"
                    ],
                    "type": "string"
                }
            },
            "type": "object"
        },
        "TestConfig": {
            "additionalProperties": false,
            "description": "Test specific configuration section.",
            "properties": {
                "auth": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "AWS authentication section",
                    "examples": [
                        {
                            "cn-northwest-1": "china-profile",
                            "default": "my-default-profile",
                            "us-east-2": "specific-profile-for-us-east-2"
                        }
                    ],
                    "type": "object"
                },
                "az_blacklist": {
                    "description": "List of Availablilty Zones ID's to exclude when generating availability zones",
                    "items": {
                        "description": "Availability Zone ID, eg.: 'use1-az1'",
                        "examples": [
                            "usw2-laz1-az1",
                            "use2-az2"
                        ],
                        "pattern": "(af-south-1a|af-south-1b|af-south-1c|ap-east-1a|ap-east-1b|ap-east-1c|ap-northeast-1a|ap-northeast-1c|ap-northeast-1d|ap-northeast-2a|ap-northeast-2b|ap-northeast-2c|ap-northeast-2d|ap-northeast-3a|ap-northeast-3b|ap-northeast-3c|ap-south-1a|ap-south-1b|ap-south-1c|ap-southeast-1a|ap-southeast-1b|ap-southeast-1c|ap-southeast-2a|ap-southeast-2b|ap-southeast-2c|ca-central-1a|ca-central-1b|ca-central-1d|eu-central-1a|eu-central-1b|eu-central-1c|eu-north-1a|eu-north-1b|eu-north-1c|eu-south-1a|eu-south-1b|eu-south-1c|eu-west-1a|eu-west-1b|eu-west-1c|eu-west-2a|eu-west-2b|eu-west-2c|eu-west-3a|eu-west-3b|eu-west-3c|me-south-1a|me-south-1b|me-south-1c|sa-east-1a|sa-east-1b|sa-east-1c|us-east-1-bos-1a|us-east-1-chi-1a|us-east-1-dfw-1a|us-east-1-iah-1a|us-east-1-mci-1a|us-east-1-mia-1a|us-east-1-msp-1a|us-east-1-nyc-1a|us-east-1-phl-1a|us-east-1a|us-east-1b|us-east-1c|us-east-1d|us-east-1e|us-east-1f|us-east-2a|us-east-2b|us-east-2c|us-west-1b|us-west-1c|us-west-2-den-1a|us-west-2-las-1a|us-west-2-lax-1a|us-west-2-lax-1b|us-west-2-pdx-1a|us-west-2a|us-west-2b|us-west-2c|us-west-2d)",
                        "type": "string"
                    },
                    "type": "array"
                },
                "parameters": {
                    "additionalProperties": {
                        "oneOf": [
                            {
                                "type": "string"
                            },
                            {
                                "type": "integer"
                            },
                            {
                                "type": "boolean"
                            },
                            {
                                "items": {
                                    "oneOf": [
                                        {
                                            "type": "integer"
                                        },
                                        {
                                            "type": "string"
                                        }
                                    ]
                                },
                                "type": "array"
                            }
                        ]
                    },
                    "default": {},
                    "description": "Parameter key-values to pass to CloudFormation, parameters provided in global config take precedence",
                    "type": "object"
                },
                "posthooks": {
                    "description": "hooks to execute after executing tests",
                    "items": {
                        "$ref": "#/definitions/HookData"
                    },
                    "type": "array"
                },
                "prehooks": {
                    "description": "hooks to execute prior to executing tests",
                    "items": {
                        "$ref": "#/definitions/HookData"
                    },
                    "type": "array"
                },
                "regions": {
                    "description": "List of AWS regions",
                    "items": {
                        "description": "AWS Region name",
                        "examples": [
                            "us-east-1"
                        ],
                        "pattern": "^(ap|eu|us|sa|ca|cn|af|me|us-gov)-(central|south|north|east|west|southeast|southwest|northeast|northwest)-[0-9]$",
                        "type": "string"
                    },
                    "type": "array"
                },
                "role_name": {
                    "description": "Role name to use when launching CFN Stacks.",
                    "type": "string"
                },
                "s3_bucket": {
                    "description": "Name of S3 bucket to upload project to, if left out a bucket will be auto-generated",
                    "examples": [
                        "my-s3-bucket-name"
                    ],
                    "pattern": "^[a-z0-9-]*$",
                    "type": "string"
                },
                "s3_regional_buckets": {
                    "description": "Enable regional auto-buckets.",
                    "examples": [
                        true,
                        false
                    ],
                    "type": "boolean"
                },
                "stack_name": {
                    "description": "Cloudformation Stack Name",
                    "type": "string"
                },
                "stack_name_prefix": {
                    "description": "Prefix to apply to generated CFN Stack Name",
                    "type": "string"
                },
                "stack_name_suffix": {
                    "description": "Suffix to apply to generated CFN Stack Name",
                    "type": "string"
                },
                "tags": {
                    "additionalProperties": {
                        "type": "string"
                    },
                    "description": "Tags to apply to CloudFormation template",
                    "examples": [
                        {
                            "CostCenter": "1001"
                        }
                    ],
                    "type": "object"
                },
                "template": {
                    "description": "path to template file relative to the project config file path",
                    "examples": [
                        "cloudformation_templates/"
                    ],
                    "type": "string"
                }
            },
            "type": "object"
        }
    },
    "description": "Taskcat configuration file",
    "properties": {
        "general": {
            "$ref": "#/definitions/GeneralConfig",
            "default": {
                "auth": null,
                "parameters": null,
                "posthooks": null,
                "prehooks": null,
                "regions": null,
                "s3_bucket": null,
                "s3_regional_buckets": null,
                "tags": null
            }
        },
        "project": {
            "$ref": "#/definitions/ProjectConfig",
            "default": {
                "auth": null,
                "az_blacklist": null,
                "build_submodules": null,
                "lambda_source_path": null,
                "lambda_zip_path": null,
                "name": null,
                "org_id": null,
                "owner": null,
                "package_lambda": null,
                "parameters": null,
                "posthooks": null,
                "prehooks": null,
                "regions": null,
                "role_name": null,
                "s3_bucket": null,
                "s3_enable_sig_v2": null,
                "s3_object_acl": null,
                "s3_regional_buckets": null,
                "shorten_stack_name": null,
                "tags": null,
                "template": null
            }
        },
        "tests": {
            "additionalProperties": {
                "$ref": "#/definitions/TestConfig"
            },
            "default": {},
            "type": "object"
        }
    },
    "type": "object"
}
