<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Project documentation for taskcat python class.">
        <meta name="author" content="tonynv@amazon.com sancard@amazon.com">
        <link rel="canonical" href="http://taskcat.io/">
        <link rel="shortcut icon" href="./img/favicon.ico">
        <title>taskcat</title>
        <link href="./css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="./css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="./js/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/highlight.pack.js"></script> 
    </head>

    <body class="homepage">

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href=".">taskcat</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li>
                        <a href="https://github.com/aws-quickstart/taskcat">
                                <i class="fa fa-github"></i>GitHub
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#taskcat">taskcat</a></li>
            <li><a href="#what-is-taskcat">What is taskcat?</a></li>
            <li><a href="#installing-taskcat-module-via-pip">Installing taskcat module via pip</a></li>
            <li><a href="#taskcat-documentation">taskcat documentation</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="taskcat">taskcat</h1>
<blockquote>
<p>This program requires python2 </p>
</blockquote>
<h3 id="what-is-taskcat">What is taskcat?</h3>
<p>TaskCat is a python Class that helps deploy your cloudformation templates in multiple regions. You can use TaskCat by importing the module and creating a TaskCat object. </p>
<blockquote>
<p>This repo example code to help you get started.</p>
</blockquote>
<h3 id="installing-taskcat-module-via-pip">Installing taskcat module via pip</h3>
<pre><code>sudo pip install taskcat
</code></pre>

<h2 id="taskcat-documentation">taskcat documentation</h2>
<h3 id="setting-up-test-cases">Setting up Test Cases</h3>
<p>To setup taskcat test tests is a two step process:
<em> Step 1 Define your test in the config.ymal
</em> Step 2 Build a json input file for your cloudformation template.</p>
<h4 id="step-1-creating-a-configymal">Step 1 Creating a config.ymal</h4>
<p>You can generate a sample config.ymal by running <code>./tcat.py -ey</code>
The followung command will create a sample config.ymal</p>
<pre><code>./tcat.py -ey | egrep -v '#|^$'  &gt;config.ymal
</code></pre>

<p>Open the file with and editor and update the filenames to match your need. (See section on working with the ymal file)</p>
<h4 id="step-2-building-a-json-input-file">Step 2 Building a json input file</h4>
<p>The example below shows an input file for a stack that requires two parms <code>KeyPair</code> and <code>InstanceType</code></p>
<pre><code class="json">
    [{
        &quot;ParameterKey&quot;: &quot;KeyPair&quot;,
        &quot;ParameterValue&quot;: &quot;mykey&quot;
    }, {
        &quot;ParameterKey&quot;: &quot;InstanceType&quot;,
        &quot;ParameterValue&quot;: &quot;t2.small&quot;
    }]
</code></pre>

<h4 id="example-code-to-instantiate-taskcat">Example code to instantiate TaskCat</h4>
<blockquote>
<p>In the repo you will find tcat.py (This file contain a example of how to create a taskcat object)
You can either download from the repo or copy and paste the following code to a file called <code>tcat.py</code></p>
</blockquote>
<pre><code>#!/usr/bin/env python
# authors:
# tonynv,sancard,sshvans
# License Apaache 2.0
#
# Purpose: This program (tcat) is a caloudformation testing tool
# Tests can defined in a configuration yaml (config.yml)
# @TODO
        # system level configuration (sys will override repo configs)
        # if os.path.isfile(sys_yml):
        # tcat.load_sysymal(sys_yml)

from taskcat import TaskCat
import yaml

def main():
    tcat_obj = TaskCat()
    tcat_obj.welcome('taskcat.io')
    # Initalize cli interface
    # @TODO Add RestFull Interface
    args = tcat_obj.interface
    # Init aws api and set default auth method
    tcat_obj.set_config(args.config_yml)
    # tcat_obj.set_config('ci/config.yml')
    # Get API Handle - Try all know auth
    tcat_obj.aws_api_init(args)

# Run in ymal mode (Batch Test execution)
# --Begin
# Check for valid ymal and required keys in config
    if args.config_yml is not None:
        print &quot;[TSKCAT] : Mode of operation: \t [ymal-mode]&quot;
        print &quot;[TSKCAT] : Configuration yml: \t [%s]&quot; % args.config_yml


        test_list = tcat_obj.validate_yaml(args.config_yml)

# Load ymal into local tcat config
        with open(tcat_obj.get_config(), 'r') as cfg:
            tcat_cfg = yaml.safe_load(cfg.read())
        cfg.close()

        tcat_obj.s3upload(tcat_cfg)
        tcat_obj.validate_template(tcat_cfg, test_list)
        tcat_obj.validate_parameters(tcat_cfg, test_list)
        stackinfo = tcat_obj.stackcreate(tcat_cfg, test_list, 'tonyv')
        tcat_obj.get_stackstatus(stackinfo , 5)

# --End
# Finish run in ymal mode

main()
</code></pre>

<h4 id="to-run-taskcat">To run taskcat</h4>
<pre><code>python tcat.py 
</code></pre>

<blockquote>
<p>See below for available flags (you need to pass as input -c at minimum)</p>
</blockquote>
<h3 id="taskcat-cli-flags">TaskCat CLI Flags</h3>
<pre><code>  -h, --help   show this help message and exit
  -c CONFIG_YML, --config_yml CONFIG_YML [Configuration yaml] Read configuration from config.yml
  -P BOTO_PROFILE, --boto-profile BOTO_PROFILE Authenticate using boto profile
  -A AWS_ACCESS_KEY, --aws_access_key AWS_ACCESS_KEY AWS Access Key
  -S AWS_SECRET_KEY, --aws_secret_key AWS_SECRET_KEY AWS Secret Key
  -ey, --example_yaml  Prints out example yaml
  -v, --verbose  Enables verbosity
</code></pre>

<h3 id="help">Help</h3>
<pre><code>If you need help you can reach out to via tonynv@amazon.com
</code></pre>
<p><em>Enjoy!</em> </p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '.';</script>
        <script data-main="./mkdocs/js/search.js" src="./mkdocs/js/require.js"></script>
        <script src="./js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 0.16.1
Build Date UTC : 2017-01-19 00:54:49
-->
