<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Taskcat by aws-quickstart</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Taskcat</h1>
        <h2>TaskCat </h2>
        <a href="https://github.com/aws-quickstart/taskcat" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="taskcat" class="anchor" href="#taskcat" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>taskCat</h1>

<p><img src="http://taskcat.io/images/tcat.png" height="256"></p>

<h3>
<a id="what-is-taskcat" class="anchor" href="#what-is-taskcat" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What is taskcat?</h3>

<p>TaskCat is a python Class that helps deploy your cloudformation templates in multiple regions. You can use TaskCat by importing the module and creating a TaskCat object. </p>

<blockquote>
<p>This repo example code to help you get started.</p>
</blockquote>

<h3>
<a id="installing-taskcat-module-via-pip" class="anchor" href="#installing-taskcat-module-via-pip" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installing taskcat module via pip</h3>

<p>On Amazon linux:</p>

<pre><code>sudo pip install taskcat
</code></pre>

<p>On OSX:
Install pip first via <code>sudo easy_install pip</code> if dev tools are not installed you will need to install them first</p>

<pre><code>pip install taskcat
</code></pre>

<p>On Ubuntu:</p>

<pre><code>sudo apt-get update
sudo apt-get install python-pip
sudo pip install taskcat
</code></pre>

<h2>
<a id="taskcat-documentation" class="anchor" href="#taskcat-documentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>taskcat documentation</h2>

<h3>
<a id="setting-up-test-cases" class="anchor" href="#setting-up-test-cases" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Setting up Test Cases</h3>

<p>To setup taskcat test tests is a two step process:</p>

<ul>
<li>Step 1 Define your test in the config.ymal</li>
<li>Step 2 Build a json input file for your cloudformation template.</li>
</ul>

<h4>
<a id="step-1-creating-a-configymal" class="anchor" href="#step-1-creating-a-configymal" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 1 Creating a config.ymal</h4>

<p>You can generate a sample config.ymal by running <code>./tcat.py -ey</code>
The followung command will create a sample config.ymal</p>

<pre><code>./tcat.py -ey | egrep -v '#|^$'  &gt;config.ymal
</code></pre>

<p>Open the file with and editor and update the filenames to match your need. (See section on working with the ymal file)</p>

<h4>
<a id="step-2-building-a-json-input-file" class="anchor" href="#step-2-building-a-json-input-file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Step 2 Building a json input file</h4>

<p>The example below shows an input file for a stack that requires two parms <code>KeyPair</code> and <code>InstanceType</code></p>

<div class="highlight highlight-source-json"><pre>
    [{
        <span class="pl-s"><span class="pl-pds">"</span>ParameterKey<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>KeyPair<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>ParameterValue<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>mykey<span class="pl-pds">"</span></span>
    }, {
        <span class="pl-s"><span class="pl-pds">"</span>ParameterKey<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>InstanceType<span class="pl-pds">"</span></span>,
        <span class="pl-s"><span class="pl-pds">"</span>ParameterValue<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>t2.small<span class="pl-pds">"</span></span>
    }]</pre></div>

<h4>
<a id="example-code-to-instantiate-taskcat" class="anchor" href="#example-code-to-instantiate-taskcat" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example code to instantiate TaskCat</h4>

<blockquote>
<p>In the repo you will find tcat.py (This file contain a example of how to create a taskcat object)
You can either download from the repo or copy and paste the following code to a file called <code>tcat.py</code></p>
</blockquote>

<pre><code>#!/usr/bin/env python
# authors:
# avattathil@gmail.com
# License Apaache 2.0
#
# Purpose: This program (tcat) is a caloudformation testing tool
# Tests can defined in a configuration yaml (config.yml)
# @TODO
        # system level configuration (sys will override repo configs)
        # if os.path.isfile(sys_yml):
        # tcat.load_sysymal(sys_yml)

from taskcat import TaskCat
import yaml

def main():
    tcat_obj = TaskCat()
    tcat_obj.welcome('taskcat.io')
    # Initalize cli interface
    # @TODO Add RestFull Interface
    args = tcat_obj.interface
    # Init aws api and set default auth method
    tcat_obj.set_config(args.config_yml)
    # tcat_obj.set_config('ci/config.yml')
    # Get API Handle - Try all know auth
    tcat_obj.aws_api_init(args)

# Run in ymal mode (Batch Test execution)
# --Begin
# Check for valid ymal and required keys in config
    if args.config_yml is not None:
        print "[TSKCAT] : Mode of operation: \t [ymal-mode]"
        print "[TSKCAT] : Configuration yml: \t [%s]" % args.config_yml


        test_list = tcat_obj.validate_yaml(args.config_yml)

# Load ymal into local tcat config
        with open(tcat_obj.get_config(), 'r') as cfg:
            tcat_cfg = yaml.safe_load(cfg.read())
        cfg.close()

        tcat_obj.s3upload(tcat_cfg)
        tcat_obj.validate_template(tcat_cfg, test_list)
        tcat_obj.validate_parameters(tcat_cfg, test_list)
        stackinfo = tcat_obj.stackcreate(tcat_cfg, test_list, 'tonyv')
        tcat_obj.get_stackstatus(stackinfo , 5)

# --End
# Finish run in ymal mode

main()
</code></pre>

<h4>
<a id="to-run-taskcat" class="anchor" href="#to-run-taskcat" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>To run taskcat</h4>

<pre><code>python tcat.py 
</code></pre>

<blockquote>
<p>See below for available flags (you need to pass as input -c at minimum)</p>
</blockquote>

<h3>
<a id="taskcat-cli-flags" class="anchor" href="#taskcat-cli-flags" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TaskCat CLI Flags</h3>

<pre><code>  -h, --help   show this help message and exit
  -c CONFIG_YML, --config_yml CONFIG_YML [Configuration yaml] Read configuration from config.yml
  -P BOTO_PROFILE, --boto-profile BOTO_PROFILE Authenticate using boto profile
  -A AWS_ACCESS_KEY, --aws_access_key AWS_ACCESS_KEY AWS Access Key
  -S AWS_SECRET_KEY, --aws_secret_key AWS_SECRET_KEY AWS Secret Key
  -ey, --example_yaml  Prints out example yaml
  -v, --verbose  Enables verbosity
</code></pre>

<h3>
<a id="help" class="anchor" href="#help" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Help</h3>

<pre><code>If you need help you can reach out to via [tonynv@amazon.com](tonynv@samazon.com)
</code></pre>

<p><em>Enjoy!</em> </p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/aws-quickstart/taskcat/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/aws-quickstart/taskcat/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/aws-quickstart/taskcat"></a> is maintained by <a href="https://github.com/aws-quickstart">aws-quickstart</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
